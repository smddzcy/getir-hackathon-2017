angular.module("MyApp",["ngRoute","ngResource","satellizer","uiGmapgoogle-maps"]).config(["$routeProvider","$locationProvider","$authProvider",function(t,e,o){function r(t,e){e.isAuthenticated()&&t.path("/")}function a(t,e){e.isAuthenticated()||t.path("/login")}r.$inject=["$location","$auth"],a.$inject=["$location","$auth"],e.html5Mode(!0),t.when("/",{templateUrl:"partials/home.html",controller:"HomeCtrl"}).when("/contact",{templateUrl:"partials/contact.html",controller:"ContactCtrl"}).when("/event",{templateUrl:"partials/event.html",controller:"EventCtrl"}).when("/login",{templateUrl:"partials/login.html",controller:"LoginCtrl",resolve:{skipIfAuthenticated:r}}).when("/signup",{templateUrl:"partials/signup.html",controller:"SignupCtrl",resolve:{skipIfAuthenticated:r}}).when("/account",{templateUrl:"partials/profile.html",controller:"ProfileCtrl",resolve:{loginRequired:a}}).when("/forgot",{templateUrl:"partials/forgot.html",controller:"ForgotCtrl",resolve:{skipIfAuthenticated:r}}).when("/reset/:token",{templateUrl:"partials/reset.html",controller:"ResetCtrl",resolve:{skipIfAuthenticated:r}}).otherwise({templateUrl:"partials/404.html"}),o.loginUrl="/login",o.signupUrl="/signup",o.facebook({url:"/auth/facebook",clientId:"543731272417479",redirectUri:"http://localhost:3000/auth/facebook/callback"}),o.google({url:"/auth/google",clientId:"7480545046-eb71sosc5ut720e7tcj87cgs5cqkl9ns.apps.googleusercontent.com"}),o.twitter({url:"/auth/twitter"}),o.github({url:"/auth/github",clientId:"205acb3615ae3357127e"})}]).run(["$rootScope","$window",function(t,e){e.localStorage.user&&(t.currentUser=JSON.parse(e.localStorage.user))}]).config(["uiGmapGoogleMapApiProvider",function(t){t.configure({key:"AIzaSyBupogsGuOJ1ckMMIM9K4JsrSl8vksNwG4",v:"3.20",libraries:"geometry,visualization"})}]),angular.module("MyApp").controller("ContactCtrl",["$scope","Contact",function(t,e){t.sendContactForm=function(){e.send(t.contact).then(function(e){t.messages={success:[e.data]}})["catch"](function(e){t.messages={error:Array.isArray(e.data)?e.data:[e.data]}})}}]),angular.module("MyApp").controller("EventCtrl",["$scope","Event",function(t,e){t.sendEventForm=function(){e.save(t.event).$promise.then(function(e){t.messages={success:[{msg:"Event has been created successfully."}]}})["catch"](function(e){t.messages={error:[e.data.msg]}})}}]),angular.module("MyApp").controller("ForgotCtrl",["$scope","Account",function(t,e){t.forgotPassword=function(){e.forgotPassword(t.user).then(function(e){t.messages={success:[e.data]}})["catch"](function(e){t.messages={error:Array.isArray(e.data)?e.data:[e.data]}})}}]),angular.module("MyApp").controller("HeaderCtrl",["$scope","$location","$window","$auth",function(t,e,o,r){t.isActive=function(t){return t===e.path()},t.isAuthenticated=function(){return r.isAuthenticated()},t.logout=function(){r.logout(),delete o.localStorage.user,e.path("/")}}]),angular.module("MyApp").controller("HomeCtrl",["$scope","Event",function(t,e){t.map={center:{latitude:41.0728162,longitude:29.0089026},zoom:12,options:{scrollwheel:!1}},navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){t.map.center={latitude:e.coords.latitude,longitude:e.coords.longitude}}),t.markers=[],e.query(function(e){e.forEach(function(e){var o={};o.id=e._id,o.location={latitude:Number(e.location.latitude),longitude:Number(e.location.longitude)},o.name="Type: "+(e.type?e.type:"No type")+", Name: "+(e.location.name?e.location.name:"No name"),o.date=e.date,t.markers.push(o)})})}]),angular.module("MyApp").controller("LoginCtrl",["$scope","$rootScope","$location","$window","$auth",function(t,e,o,r,a){t.login=function(){a.login(t.user).then(function(t){e.currentUser=t.data.user,r.localStorage.user=JSON.stringify(t.data.user),o.path("/account")})["catch"](function(e){t.messages={error:Array.isArray(e.data)?e.data:[e.data]}})},t.authenticate=function(n){a.authenticate(n).then(function(t){e.currentUser=t.data.user,r.localStorage.user=JSON.stringify(t.data.user),o.path("/")})["catch"](function(e){e.error?t.messages={error:[{msg:e.error}]}:e.data&&(t.messages={error:[e.data]})})}}]),angular.module("MyApp").controller("ProfileCtrl",["$scope","$rootScope","$location","$window","$auth","Account",function(t,e,o,r,a,n){t.profile=e.currentUser,t.updateProfile=function(){n.updateProfile(t.profile).then(function(o){e.currentUser=o.data.user,r.localStorage.user=JSON.stringify(o.data.user),t.messages={success:[o.data]}})["catch"](function(e){t.messages={error:Array.isArray(e.data)?e.data:[e.data]}})},t.changePassword=function(){n.changePassword(t.profile).then(function(e){t.messages={success:[e.data]}})["catch"](function(e){t.messages={error:Array.isArray(e.data)?e.data:[e.data]}})},t.link=function(e){a.link(e).then(function(e){t.messages={success:[e.data]}})["catch"](function(e){r.scrollTo(0,0),t.messages={error:[e.data]}})},t.unlink=function(e){a.unlink(e).then(function(){t.messages={success:[response.data]}})["catch"](function(e){t.messages={error:[e.data]}})},t.deleteAccount=function(){n.deleteAccount().then(function(){a.logout(),delete r.localStorage.user,o.path("/")})["catch"](function(e){t.messages={error:[e.data]}})}}]),angular.module("MyApp").controller("ResetCtrl",["$scope","Account",function(t,e){t.resetPassword=function(){e.resetPassword(t.user).then(function(e){t.messages={success:[e.data]}})["catch"](function(e){t.messages={error:Array.isArray(e.data)?e.data:[e.data]}})}}]),angular.module("MyApp").controller("SignupCtrl",["$scope","$rootScope","$location","$window","$auth",function(t,e,o,r,a){t.signup=function(){a.signup(t.user).then(function(t){a.setToken(t),e.currentUser=t.data.user,r.localStorage.user=JSON.stringify(t.data.user),o.path("/")})["catch"](function(e){t.messages={error:Array.isArray(e.data)?e.data:[e.data]}})},t.authenticate=function(n){a.authenticate(n).then(function(t){e.currentUser=t.data.user,r.localStorage.user=JSON.stringify(t.data.user),o.path("/")})["catch"](function(e){e.error?t.messages={error:[{msg:e.error}]}:e.data&&(t.messages={error:[e.data]})})}}]),angular.module("MyApp").factory("Account",["$http",function(t){return{updateProfile:function(e){return t.put("/account",e)},changePassword:function(e){return t.put("/account",e)},deleteAccount:function(){return t["delete"]("/account")},forgotPassword:function(e){return t.post("/forgot",e)},resetPassword:function(e){return t.post("/reset",e)}}}]),angular.module("MyApp").factory("Contact",["$http",function(t){return{send:function(e){return t.post("/contact",e)}}}]),angular.module("MyApp").factory("Event",["$resource",function(t){return t("/event/:eventId",{eventId:"@id"})}]);